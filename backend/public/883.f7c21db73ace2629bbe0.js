(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[883],{8573:(P,T)=>{function l(r){if(r)return function(r){for(var h in l.prototype)r[h]=l.prototype[h];return r}(r)}T.Q=l,l.prototype.on=l.prototype.addEventListener=function(r,h){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(h),this},l.prototype.once=function(r,h){function e(){this.off(r,e),h.apply(this,arguments)}return e.fn=h,this.on(r,e),this},l.prototype.off=l.prototype.removeListener=l.prototype.removeAllListeners=l.prototype.removeEventListener=function(r,h){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var e=this._callbacks["$"+r];if(!e)return this;if(1==arguments.length)return delete this._callbacks["$"+r],this;for(var g,y=0;y<e.length;y++)if((g=e[y])===h||g.fn===h){e.splice(y,1);break}return 0===e.length&&delete this._callbacks["$"+r],this},l.prototype.emitReserved=l.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var h=new Array(arguments.length-1),e=this._callbacks["$"+r],g=1;g<arguments.length;g++)h[g-1]=arguments[g];if(e){g=0;for(var y=(e=e.slice(0)).length;g<y;++g)e[g].apply(this,h)}return this},l.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]},l.prototype.hasListeners=function(r){return!!this.listeners(r).length}},7591:P=>{function T(l){this.ms=(l=l||{}).min||100,this.max=l.max||1e4,this.factor=l.factor||2,this.jitter=l.jitter>0&&l.jitter<=1?l.jitter:0,this.attempts=0}P.exports=T,T.prototype.duration=function(){var l=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var o=Math.random(),r=Math.floor(o*this.jitter*l);l=0==(1&Math.floor(10*o))?l-r:l+r}return 0|Math.min(l,this.max)},T.prototype.reset=function(){this.attempts=0},T.prototype.setMin=function(l){this.ms=l},T.prototype.setMax=function(l){this.max=l},T.prototype.setJitter=function(l){this.jitter=l}},4966:P=>{try{P.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(T){P.exports=!1}},9603:(P,T)=>{T.encode=function(l){var o="";for(var r in l)l.hasOwnProperty(r)&&(o.length&&(o+="&"),o+=encodeURIComponent(r)+"="+encodeURIComponent(l[r]));return o},T.decode=function(l){for(var o={},r=l.split("&"),h=0,e=r.length;h<e;h++){var g=r[h].split("=");o[decodeURIComponent(g[0])]=decodeURIComponent(g[1])}return o}},4171:P=>{var T=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,l=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];P.exports=function(e){var g=e,y=e.indexOf("["),M=e.indexOf("]");-1!=y&&-1!=M&&(e=e.substring(0,y)+e.substring(y,M).replace(/:/g,";")+e.substring(M,e.length));for(var N=T.exec(e||""),x={},R=14;R--;)x[l[R]]=N[R]||"";return-1!=y&&-1!=M&&(x.source=g,x.host=x.host.substring(1,x.host.length-1).replace(/;/g,":"),x.authority=x.authority.replace("[","").replace("]","").replace(/;/g,":"),x.ipv6uri=!0),x.pathNames=function(h,e){var y=e.replace(/\/{2,9}/g,"/").split("/");return("/"==e.substr(0,1)||0===e.length)&&y.splice(0,1),"/"==e.substr(e.length-1,1)&&y.splice(y.length-1,1),y}(0,x.path),x.queryKey=function(h,e){var g={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(y,M,N){M&&(g[M]=N)}),g}(0,x.query),x}},5391:P=>{"use strict";var e,T="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},r=0,h=0;function g(N){var x="";do{x=T[N%64]+x,N=Math.floor(N/64)}while(N>0);return x}function M(){var N=g(+new Date);return N!==e?(r=0,e=N):N+"."+g(r++)}for(;h<64;h++)o[T[h]]=h;M.encode=g,M.decode=function(N){var x=0;for(h=0;h<N.length;h++)x=64*x+o[N.charAt(h)];return x},P.exports=M},141:(P,T,l)=>{"use strict";l.d(T,{g:()=>r});var o=l(8720);let r=(()=>{class h{constructor(){this.displayNone=!1,this.displayAllMensajes=!1,window.addEventListener("resize",()=>{window.innerWidth>600&&(this.displayAllMensajes=!1)})}fideElement(g){g.classList.contains("d-none")?(g.classList.remove("d-none"),g.animate([{opacity:0},{opacity:100}],100)):g.animate({opacity:0},100).onfinish=()=>{g.classList.add("d-none")}}fideOut(g){g.animate({opacity:0},100).onfinish=()=>{g.classList.add("d-none")}}fideIn(g){g.classList.remove("d-none"),g.animate([{opacity:0},{opacity:100}],100)}divAllMensajes(){window.innerWidth<=600&&(this.displayAllMensajes=!0)}divMensajes(){window.innerWidth<=600&&(this.displayAllMensajes=!1)}}return h.\u0275fac=function(g){return new(g||h)},h.\u0275prov=o.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})()},3736:(P,T,l)=>{"use strict";l.d(T,{_:()=>w});var o=l(2340),r=l(8720),h=l(3589),e=l(665),g=l(141),y=l(5127),M=l(5228),N=l(8583);const x=["ultimoAmigos"],R=["amigoActivo"];function j(A,v){if(1&A&&(r.TgZ(0,"p",20),r._uU(1),r.qZA()),2&A){const b=v.ngIf;r.xp6(1),r.hij(" ",null==b[0]?null:b[0].nameUser," ")}}function S(A,v){if(1&A&&(r.TgZ(0,"div"),r._uU(1),r.qZA()),2&A){const b=r.oxw(2);r.xp6(1),r.hij(" ",b.scrollInto()," ")}}const J=function(A,v){return{"bg-resp":A,"mb-3":v}};function U(A,v){if(1&A&&(r.TgZ(0,"div"),r.TgZ(1,"div",21),r.TgZ(2,"p",22),r._uU(3),r.qZA(),r.TgZ(4,"small",23),r._uU(5),r.qZA(),r.qZA(),r.YNc(6,S,2,1,"div",24),r.qZA()),2&A){const b=v.$implicit,m=v.last,u=r.oxw();r.xp6(1),r.Q6J("ngClass",r.WLB(4,J,u.selectAmigo.id==b.toUser,m)),r.xp6(2),r.hij(" ",b.mensaje," "),r.xp6(2),r.hij(" ",b.fecha,""),r.xp6(1),r.Q6J("ngIf",m)}}function I(A,v){1&A&&(r.TgZ(0,"div",25),r.TgZ(1,"p",26),r._uU(2," No hay mensajes "),r.qZA(),r.qZA())}let w=(()=>{class A{constructor(b,m,u,O,B){this.selectAmigo=b,this.peticiones=m,this.usuario=u,this.cambios=O,this.render=B,this.myClick=new r.vpe,this.nombre="Miguel Valero",this.subs=[],this.forms=new e.cw({mensaje:new e.NI("",[e.kI.required,e.kI.maxLength(200)])})}ngOnInit(){var b;const m=(0,h.io)(o.N.socket);m.on("connect",()=>{}),m.on(`${null===(b=this.usuario.datos)||void 0===b?void 0:b.id}-mensajes`,u=>{u=u.map(O=>(O.fecha=new Date(O.fecha).toLocaleDateString(),O)),this.numMensajes=u.length,this.mensajes=u.reverse(),this.cambios.detectChanges()}),this.peticiones.getMensajeAmigo(this.selectAmigo.id).subscribe(u=>{u=u.map(O=>(O.fecha=new Date(O.fecha).toLocaleDateString(),O)),this.mensajes=u.reverse(),this.numMensajes=u.length,this.cambios.detectChanges()}),this.nameUser=this.peticiones.getNameUser(this.selectAmigo.id)}ngAfterViewInit(){this.selectAmigo.fideIn(this.amigoActivo.nativeElement),this.listen=this.render.listen(this.ultimoAmigos.nativeElement,"focus",()=>{this.subs.push(this.peticiones.visto(this.mensajes[0].chat).subscribe(()=>{}))})}ngOnDestroy(){this.subs.forEach(b=>{b.unsubscribe()}),this.selectAmigo.displayNone=!1}eventClick(){this.myClick.emit(this.nombre),this.selectAmigo.fideOut(this.amigoActivo.nativeElement),setTimeout(()=>{this.selectAmigo.displayNone=!1},100)}addMensaje(b){if(!this.forms.controls.mensaje.errors){let m={toUser:this.selectAmigo.id,mensaje:this.forms.controls.mensaje.value};b.mensaje.value="",this.peticiones.addMensajeAmigo(m).subscribe(u=>{})}}scrollInto(){this.ultimoAmigos.nativeElement.scrollIntoView(),window.onload=()=>{this.ultimoAmigos.nativeElement.scrollIntoView()}}}return A.\u0275fac=function(b){return new(b||A)(r.Y36(g.g),r.Y36(y.x),r.Y36(M.i),r.Y36(r.sBO),r.Y36(r.Qsj))},A.\u0275cmp=r.Xpm({type:A,selectors:[["app-amigo-activo-mensajes"]],viewQuery:function(b,m){if(1&b&&(r.Gf(x,5),r.Gf(R,5)),2&b){let u;r.iGM(u=r.CRH())&&(m.ultimoAmigos=u.first),r.iGM(u=r.CRH())&&(m.amigoActivo=u.first)}},outputs:{myClick:"myClick"},decls:25,vars:6,consts:[[1,"mt-3","d-block","sombra","position-relative","rounded-3","overflow-hidden",2,"width","90%","height","100%","padding-top","110px"],["amigoActivo",""],[1,"d-block","position-absolute","bg-purpura","rounded-top",2,"width","100%","height","110px","margin-top","-110px"],[1,"w-100","d-block"],[1,"w-100","px-3","py-2","roboto","d-flex","align-items-center","white","select-pointer",3,"click"],[1,"material-icons","h-fit","position-relative",2,"margin-bottom","-2px"],[1,"rounded-top","d-flex","m-0","px-3","position-relative",2,"width","100%"],[1,"material-icons","position-relative","select-off","white",2,"font-size","50px"],["class","\n          text-nowrap\n          ellipsis\n          segoepr\n          white\n          size-parrafo\n          fw-bold\n          select-text\n          my-auto\n          ms-2\n          h-fit\n          pt-2\n        ","style","width: 100%",4,"ngIf"],["id","all-mensajes",1,"scroll","text-center",2,"height","100%","overflow-x","hidden","position","relative","display","flex","flex-direction","column"],[4,"ngFor","ngForOf"],["style","width: 100%; height: 76%",4,"ngIf"],[1,"d-flex","h-fit","rounded-3","py-3",2,"width","100%","margin-top","auto !important","background","white"],[1,"d-b","position-relative","h-fit","mx-auto",2,"width","90%"],[1,"d-block","position-relative"],["spellcheck","true","autocomplete","off","novalidate","",3,"formGroup","ngSubmit"],["formulario",""],["name","mensaje","formControlName","mensaje","type","text","placeholder","Escribir mensaje",1,"py-2","mb-2","h-50","w-100","border-0","border-bottom","my-auto","select-on","outline-off",2,"border-color","#3e3e3e !important","outline","none","padding-right","40px !important"],["ultimoAmigos",""],[1,"material-icons","fs-2","select-pointer",2,"position","absolute","bottom","20px","margin-left","-30px","margin-bottom","-7px",3,"click"],[1,"text-nowrap","ellipsis","segoepr","white","size-parrafo","fw-bold","select-text","my-auto","ms-2","h-fit","pt-2",2,"width","100%"],[1,"h-fit","bg-resp","mt-3","p-3","rounded-3","sombra-menor","mx-auto",2,"width","90%",3,"ngClass"],[1,"h-fit","m-0","p-0","size-comentarios","gris-claro","segoepr",2,"overflow-wrap","break-word","text-align","start"],[1,"pt-3","size-small","gris-fecha","roboto","d-flex","justify-content-end","align-content-end"],[4,"ngIf"],[2,"width","100%","height","76%"],[1,"d-flex","m-auto","w-fit","size-nombres","segoepr","gris",2,"padding-top","50%"]],template:function(b,m){if(1&b){const u=r.EpF();r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"h6",4),r.NdJ("click",function(){return m.eventClick()}),r.TgZ(5,"span",5),r._uU(6," chevron_left "),r.qZA(),r._uU(7," atras "),r.qZA(),r.qZA(),r.TgZ(8,"div",6),r.TgZ(9,"span",7),r._uU(10," account_circle "),r.qZA(),r.YNc(11,j,2,1,"p",8),r.ALo(12,"async"),r.qZA(),r.qZA(),r.TgZ(13,"section",9),r.YNc(14,U,7,7,"div",10),r.YNc(15,I,3,0,"div",11),r.TgZ(16,"div",12),r.TgZ(17,"div",13),r.TgZ(18,"div",14),r.TgZ(19,"form",15,16),r.NdJ("ngSubmit",function(){r.CHM(u);const B=r.MAs(20);return m.addMensaje(B)}),r._UZ(21,"input",17,18),r.TgZ(23,"span",19),r.NdJ("click",function(){r.CHM(u);const B=r.MAs(20);return m.addMensaje(B)}),r._uU(24," send "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}2&b&&(r.xp6(11),r.Q6J("ngIf",r.lcZ(12,4,m.nameUser)),r.xp6(3),r.Q6J("ngForOf",m.mensajes),r.xp6(1),r.Q6J("ngIf",!m.numMensajes),r.xp6(4),r.Q6J("formGroup",m.forms))},directives:[N.O5,N.sg,e._Y,e.JL,e.sg,e.Fj,e.JJ,e.u,N.mk],pipes:[N.Ov],styles:[""],changeDetection:0}),A})()},3845:(P,T,l)=>{"use strict";l.d(T,{A:()=>J});var o=l(3589),r=l(2340),h=l(8720),e=l(141),g=l(5228),y=l(5127),M=l(8583);const N=["spanImagen"];function x(U,I){1&U&&(h.TgZ(0,"span",6),h._uU(1," account_circle "),h.qZA())}let R=(()=>{class U{constructor(w,A){this.selectAmigo=w,this.peticion=A,this.myClick=new h.vpe,this.assets="https://bucket-80hwyd.s3.amazonaws.com/",this.imagen=null,this.subs=[]}ngOnInit(){this.subs.push(this.peticion.getPersonUser(this.amigoActivo.id).subscribe(w=>{this.amigoActivo.nameUser=w.nameUser,w.imagen&&(this.imagen=w.imagen,this.spanImagen.nativeElement.classList.remove("d-none"),this.spanImagen.nativeElement.src=this.assets+this.imagen)}))}ngOnDestroy(){var w;null===(w=this.subs)||void 0===w||w.forEach(A=>{A.unsubscribe()})}eventClick(){this.myClick.emit(this.amigoActivo.id),this.selectAmigo.displayNone=!0}}return U.\u0275fac=function(w){return new(w||U)(h.Y36(e.g),h.Y36(y.x))},U.\u0275cmp=h.Xpm({type:U,selectors:[["app-amigo-activo"]],viewQuery:function(w,A){if(1&w&&h.Gf(N,5),2&w){let v;h.iGM(v=h.CRH())&&(A.spanImagen=v.first)}},inputs:{amigoActivo:"amigoActivo"},outputs:{myClick:"myClick"},decls:7,vars:2,consts:[[1,"d-flex","py-1","mx-auto","position-relative","overflow-visible","select-pointer",2,"width","90%",3,"click"],["class","material-icons position-relative","style","font-size: 50px",4,"ngIf"],[1,"d-none","rounded-circle","mt-1",2,"width","42px !important","height","42px !important"],["spanImagen",""],[1,"text-nowrap","ellipsis","segoepr","w-50","dark","size-parrafo","fw-bold","my-auto","ms-2","h-fit",2,"overflow-wrap","break-word"],[1,"activo"],[1,"material-icons","position-relative",2,"font-size","50px"]],template:function(w,A){1&w&&(h.TgZ(0,"div",0),h.NdJ("click",function(){return A.eventClick()}),h.YNc(1,x,2,0,"span",1),h._UZ(2,"img",2,3),h.TgZ(4,"p",4),h._uU(5),h.qZA(),h._UZ(6,"div",5),h.qZA()),2&w&&(h.xp6(1),h.Q6J("ngIf",!A.imagen),h.xp6(4),h.hij(" ",null==A.amigoActivo?null:A.amigoActivo.nameUser," "))},directives:[M.O5],styles:[""]}),U})();function j(U,I){if(1&U){const w=h.EpF();h.TgZ(0,"section"),h.TgZ(1,"app-amigo-activo",4),h.NdJ("myClick",function(v){return h.CHM(w),h.oxw().log(v)}),h.qZA(),h.qZA()}if(2&U){const w=I.$implicit;h.xp6(1),h.Q6J("amigoActivo",w)}}function S(U,I){1&U&&(h.TgZ(0,"section"),h.TgZ(1,"p",5),h._uU(2," No hay amigos activos "),h.qZA(),h._UZ(3,"img",6),h.qZA())}let J=(()=>{class U{constructor(w,A,v){this.selectAmigo=w,this.usuario=A,this.peticiones=v,this.totalAmigos=1}ngOnInit(){}log(w){this.selectAmigo.id=w}ngAfterViewInit(){this.sockets()}sockets(){this.peticiones.getUser().subscribe(w=>{const A=(0,o.io)(r.N.socket);A.on("connect",()=>{}),A.on(`${w.id}-amigosActivos`,v=>{this.usuario.numAmigosActivos=v.length,this.usuario.amigosActivos=v})})}}return U.\u0275fac=function(w){return new(w||U)(h.Y36(e.g),h.Y36(g.i),h.Y36(y.x))},U.\u0275cmp=h.Xpm({type:U,selectors:[["app-amigos-activos"]],decls:5,vars:2,consts:[[1,"sombra","mt-3","rounded-3","scroll","pb-3",2,"width","90%","height","100%","overflow-x","hidden"],[1,"pt-3","text-center","segoepr","dark","size-nombres","fw-bold","select-text"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"amigoActivo","myClick"],[1,"d-block","mx-auto","segoepr","gris-claro","size-nombres","mt-3","text-center",2,"width","80%"],["src","../../../assets/imagenes/chat.svg","width","80%",1,"mt-5","mx-auto","d-block"]],template:function(w,A){1&w&&(h.TgZ(0,"div",0),h.TgZ(1,"h6",1),h._uU(2," Personas activas "),h.qZA(),h.YNc(3,j,2,1,"section",2),h.YNc(4,S,4,0,"section",3),h.qZA()),2&w&&(h.xp6(3),h.Q6J("ngForOf",A.usuario.amigosActivos),h.xp6(1),h.Q6J("ngIf",!A.usuario.numAmigosActivos))},directives:[M.sg,M.O5,R],styles:[""]}),U})()},1724:(P,T,l)=>{"use strict";l.d(T,{M:()=>Ce});var o=l(3589),r=l(2340),h=l(665),e=l(8720),g=l(6326),y=l(141),M=l(5127),N=l(5228),x=l(8583);const R=["spanImagen"],j=function(d){return{new:d}};function S(d,C){if(1&d&&(e.TgZ(0,"span",6),e._uU(1," account_circle "),e.qZA()),2&d){const c=e.oxw();e.Q6J("ngClass",e.VKq(1,j,c.chatAmigo.visto))}}function J(d,C){if(1&d&&(e.TgZ(0,"p",7),e._uU(1),e.TgZ(2,"small",8),e._uU(3),e.qZA(),e.qZA()),2&d){const c=C.ngIf,a=e.oxw();e.xp6(1),e.hij(" ",null==c[0]?null:c[0].nameUser," "),e.xp6(2),e.hij(" ",a.chatAmigo.mensaje,"")}}const U=function(d){return{activo:d}};function I(d,C){1&d&&e._UZ(0,"div",9),2&d&&e.Q6J("ngClass",e.VKq(1,U,C.ngIf[0].activo))}let w=(()=>{class d{constructor(c,a,f,E){this.selectAmigo=c,this.peticiones=a,this.usuario=f,this.cambios=E,this.subs=[],this.assets="https://bucket-80hwyd.s3.us-east-1.amazonaws.com/",this.imagen=null}ngOnInit(){this.nameUser=this.peticiones.getNameUser(this.chatAmigo.chat),this.isActivo=this.peticiones.isActivo(this.chatAmigo.chat),this.subs.push(this.peticiones.getPersonUser(this.chatAmigo.chat).subscribe(c=>{c.imagen&&(this.imagen=c.imagen,this.spanImagen.nativeElement.classList.remove("d-none"),this.spanImagen.nativeElement.src=this.assets+this.imagen,this.cambios.detectChanges()),this.cambios.detectChanges()}))}ngAfterViewInit(){this.sockets()}ngOnDestroy(){var c;null===(c=this.subs)||void 0===c||c.forEach(a=>{a.unsubscribe()})}showDivAllMensajes(c){this.subs.push(this.peticiones.visto(this.chatAmigo.chat).subscribe(()=>{})),this.selectAmigo.id=c,this.selectAmigo.divAllMensajes(),this.cambios.detectChanges()}sockets(){this.peticiones.getUser().subscribe(c=>{const a=(0,o.io)(r.N.socket);a.on("connect",()=>{}),a.on(`${c.id}-amigosActivos`,f=>{this.isActivo=this.peticiones.isActivo(this.chatAmigo.chat)}),a.on(`${c.id}-visto`,f=>{this.chatAmigo.visto=0,this.cambios.detectChanges()})})}}return d.\u0275fac=function(c){return new(c||d)(e.Y36(y.g),e.Y36(M.x),e.Y36(N.i),e.Y36(e.sBO))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-menu-mensaje-amigo"]],viewQuery:function(c,a){if(1&c&&e.Gf(R,5),2&c){let f;e.iGM(f=e.CRH())&&(a.spanImagen=f.first)}},inputs:{chatAmigo:"chatAmigo"},decls:8,vars:7,consts:[[1,"d-flex","py-1","position-relative","overflow-visible","select-pointer","max-600-mensajesAmigo",3,"click"],["class","material-icons position-relative","style","font-size: 40px",3,"ngClass",4,"ngIf"],[1,"mx-auto","mt-1","ms-1","me-1","d-none","rounded-circle",2,"width","38px","height","33px"],["spanImagen",""],["class","\n      pe-4\n      overflow-hidden\n      text-nowrap\n      ellipsis\n      segoepr\n      dark\n      size-small\n      fw-bold\n      my-auto\n      ms-2\n      h-fit\n    ","style","width: 200px; overflow-wrap: break-word !important",4,"ngIf"],["class","px-1",3,"ngClass",4,"ngIf"],[1,"material-icons","position-relative",2,"font-size","40px",3,"ngClass"],[1,"pe-4","overflow-hidden","text-nowrap","ellipsis","segoepr","dark","size-small","fw-bold","my-auto","ms-2","h-fit",2,"width","200px","overflow-wrap","break-word !important"],[1,"d-block","gris-claro","text-nowrap","ellipsis"],[1,"px-1",3,"ngClass"]],template:function(c,a){1&c&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return a.showDivAllMensajes(a.chatAmigo.chat)}),e.YNc(1,S,2,3,"span",1),e._UZ(2,"img",2,3),e.YNc(4,J,4,2,"p",4),e.ALo(5,"async"),e.YNc(6,I,1,3,"div",5),e.ALo(7,"async"),e.qZA()),2&c&&(e.xp6(1),e.Q6J("ngIf",!a.imagen),e.xp6(3),e.Q6J("ngIf",e.lcZ(5,3,a.nameUser)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,5,a.isActivo)))},directives:[x.O5,x.mk],pipes:[x.Ov],styles:[".max-600-mensajesAmigo[_ngcontent-%COMP%]{width:90%!important;margin:auto!important}@media screen and (max-width: 600px){.max-600-mensajesAmigo[_ngcontent-%COMP%]{padding:0!important;margin:10px 0 0!important}}"],changeDetection:0}),d})();const A=["spanImagen"];function v(d,C){1&d&&(e.TgZ(0,"span",10),e._uU(1," account_circle "),e.qZA())}function b(d,C){if(1&d){const c=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(c),e.oxw().aceptarPeticion()}),e._uU(1," Aceptar "),e.qZA()}}function m(d,C){if(1&d){const c=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(c),e.oxw().cancelarPeticion()}),e._uU(1," Cancelar "),e.qZA()}}function u(d,C){1&d&&(e.TgZ(0,"p",12),e._uU(1," aceptado "),e.qZA())}function O(d,C){1&d&&(e.TgZ(0,"p",13),e._uU(1," rechazado "),e.qZA())}let B=(()=>{class d{constructor(c,a){this.peticiones=c,this.cambios=a,this.subs=[],this.aceptar=!1,this.cancelar=!1,this.assets="https://bucket-80hwyd.s3.us-east-1.amazonaws.com/",this.imagen=null}ngOnInit(){this.subs.push(this.peticiones.getNameUser(this.solicitud.idAmigo).subscribe(c=>{this.nameUser=c[0].nameUser,this.cambios.detectChanges()})),this.subs.push(this.peticiones.getPersonUser(this.solicitud.idAmigo).subscribe(c=>{c.imagen&&(this.imagen=c.imagen,this.spanImagen.nativeElement.classList.remove("d-none"),this.spanImagen.nativeElement.src=this.assets+this.imagen,this.cambios.detectChanges()),this.cambios.detectChanges()}))}ngOnDestroy(){this.subs.forEach(c=>{c.unsubscribe()})}aceptarPeticion(){this.subs.push(this.peticiones.aceptarSolicitud({idAmigo:this.solicitud.idAmigo}).subscribe(a=>{this.aceptar=!0,this.cambios.detectChanges()}))}cancelarPeticion(){this.subs.push(this.peticiones.removeAmigoUser(this.solicitud.idAmigo).subscribe(c=>{this.cancelar=!0,this.cambios.detectChanges()}))}}return d.\u0275fac=function(c){return new(c||d)(e.Y36(M.x),e.Y36(e.sBO))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-solicitudes"]],viewQuery:function(c,a){if(1&c&&e.Gf(A,5),2&c){let f;e.iGM(f=e.CRH())&&(a.spanImagen=f.first)}},inputs:{solicitud:"solicitud"},decls:12,vars:6,consts:[[1,"p-0","mx-auto","d-block","py-1",2,"width","90%"],[1,"d-flex","mx-auto","position-relative",2,"width","100%s"],["class","material-icons position-relative","style","font-size: 40px",4,"ngIf"],[1,"mx-auto","mt-1","d-none","rounded-circle",2,"width","38px","height","33px"],["spanImagen",""],[1,"text-nowrap","ellipsis","segoepr","dark","size-small","fw-bold","select-text","my-auto","ms-2","h-fit",2,"width","150px"],["routerLink","/person/miguelValero",1,"text-decoration-none","dark","link-hover"],["class","myBtn size-parrafo roboto w-fit mx-0","style","margin-left: 10px !important",3,"click",4,"ngIf"],["class","amigo text-center h-fit px-2 py-1 size-nombres my-auto rounded","style","margin-left: 10px",4,"ngIf"],["class","cancelado text-center h-fit px-2 py-1 size-nombres my-auto rounded","style","margin-left: 10px",4,"ngIf"],[1,"material-icons","position-relative",2,"font-size","40px"],[1,"myBtn","size-parrafo","roboto","w-fit","mx-0",2,"margin-left","10px !important",3,"click"],[1,"amigo","text-center","h-fit","px-2","py-1","size-nombres","my-auto","rounded",2,"margin-left","10px"],[1,"cancelado","text-center","h-fit","px-2","py-1","size-nombres","my-auto","rounded",2,"margin-left","10px"]],template:function(c,a){1&c&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,v,2,0,"span",2),e._UZ(3,"img",3,4),e.TgZ(5,"p",5),e.TgZ(6,"a",6),e._uU(7),e.qZA(),e.qZA(),e.YNc(8,b,2,0,"button",7),e.YNc(9,m,2,0,"button",7),e.YNc(10,u,2,0,"p",8),e.YNc(11,O,2,0,"p",9),e.qZA(),e.qZA()),2&c&&(e.xp6(2),e.Q6J("ngIf",!a.imagen),e.xp6(5),e.hij(" ",a.nameUser,""),e.xp6(1),e.Q6J("ngIf",!a.aceptar&&!a.cancelar),e.xp6(1),e.Q6J("ngIf",!a.aceptar&&!a.cancelar),e.xp6(1),e.Q6J("ngIf",a.aceptar),e.xp6(1),e.Q6J("ngIf",a.cancelar))},directives:[x.O5,g.yS],styles:[""],changeDetection:0}),d})();const V=["spanImagen"];function ue(d,C){1&d&&(e.TgZ(0,"span",8),e._uU(1," account_circle "),e.qZA())}let me=(()=>{class d{constructor(c,a){this.peticiones=c,this.cambios=a,this.subs=[],this.assets="https://bucket-80hwyd.s3.us-east-1.amazonaws.com/",this.imagen=null}ngOnInit(){this.peticiones.getNameUser(this.notificacion.idAmigo).subscribe(c=>{this.nameUser=c[0].nameUser,this.cambios.detectChanges()}),this.subs.push(this.peticiones.getPersonUser(this.notificacion.idAmigo).subscribe(c=>{c.imagen&&(this.imagen=c.imagen,this.spanImagen.nativeElement.classList.remove("d-none"),this.spanImagen.nativeElement.src=this.assets+this.imagen,this.cambios.detectChanges()),this.cambios.detectChanges()}))}ngOnDestroy(){var c;null===(c=this.subs)||void 0===c||c.forEach(a=>{a.unsubscribe()})}}return d.\u0275fac=function(c){return new(c||d)(e.Y36(M.x),e.Y36(e.sBO))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-notificacion"]],viewQuery:function(c,a){if(1&c&&e.Gf(V,5),2&c){let f;e.iGM(f=e.CRH())&&(a.spanImagen=f.first)}},inputs:{notificacion:"notificacion"},decls:10,vars:4,consts:[[1,"p-0","mx-auto","d-block","py-1",2,"width","90%"],[1,"d-flex","mx-auto","position-relative",2,"width","100%s"],["class","material-icons position-relative","style","font-size: 40px",4,"ngIf"],[1,"mx-auto","mt-1","ms-1","me-1","d-none","rounded-circle",2,"width","38px","height","33px"],["spanImagen",""],[1,"text-nowrap","ellipsis","segoepr","dark","size-small","fw-bold","my-auto","ms-2","h-fit",2,"width","170px","overflow","hidden"],["routerLink","/person/miguelValero",1,"text-decoration-none","dark","link-hover"],[1,"d-block","ellipsis","gris-claro"],[1,"material-icons","position-relative",2,"font-size","40px"]],template:function(c,a){1&c&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,ue,2,0,"span",2),e._UZ(3,"img",3,4),e.TgZ(5,"p",5),e.TgZ(6,"a",6),e._uU(7),e.qZA(),e.TgZ(8,"small",7),e._uU(9),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&c&&(e.xp6(2),e.Q6J("ngIf",!a.imagen),e.xp6(5),e.hij(" ",a.nameUser,""),e.xp6(2),e.AsE(" ",1===a.notificacion.likes?"Le gusto tu post":""," ",1===a.notificacion.comentarios?"Comento tu foto":""," "))},directives:[x.O5,g.yS],styles:[""],changeDetection:0}),d})();const de=["divSolicitudes"],fe=["divNotificaciones"],ie=["divMensajes"],ne=["botonSolicitudes"],se=["botonMensajes"],ge=["botonNotificaciones"],ve=["divPerfil"],oe=["botonPefil"],re=["spanImagen"];function ae(d,C){if(1&d){const c=e.EpF();e.TgZ(0,"app-menu-mensaje-amigo",75),e.NdJ("click",function(){return e.CHM(c),e.oxw().mensajesAmigo()}),e.qZA()}2&d&&e.Q6J("chatAmigo",C.$implicit)}function $(d,C){1&d&&(e.TgZ(0,"div",76),e.TgZ(1,"p",77),e._uU(2," No tienes mensajes "),e.qZA(),e.qZA())}function _e(d,C){1&d&&e._UZ(0,"app-solicitudes",78),2&d&&e.Q6J("solicitud",C.$implicit)}function ye(d,C){1&d&&(e.TgZ(0,"div",76),e.TgZ(1,"p",77),e._uU(2," No tienes solicitudes "),e.qZA(),e.qZA())}function be(d,C){1&d&&e._UZ(0,"app-notificacion",79),2&d&&e.Q6J("notificacion",C.$implicit)}function Ae(d,C){1&d&&(e.TgZ(0,"div",76),e.TgZ(1,"p",77),e._uU(2," No tienes notificaciones "),e.qZA(),e.qZA())}function K(d,C){1&d&&(e.TgZ(0,"span",80),e._uU(1," account_circle "),e.qZA())}function ce(d,C){1&d&&(e.TgZ(0,"span",80),e._uU(1," account_circle "),e.qZA())}const z=function(d,C){return{"material-icons-outlined":d,"material-icons":C}},D=function(d){return{new:d}},H=function(){return{top:"49px",background:"white"}};let Ce=(()=>{class d{constructor(c,a,f,E,L,Y,le,xe){this.router=c,this.route=a,this.render=f,this.selectAmigo=E,this.peticionesService=L,this.usuario=Y,this.cambios=le,this.peticiones=xe,this.busqueda=new h.NI(""),this.link="/search/",this.buscar="",this.subs=[],this.assets="https://bucket-80hwyd.s3.amazonaws.com/",this.imagen=null}ngOnInit(){this.subs.push(this.peticiones.getChatUser().subscribe(c=>{c.sort(function(a,f){return f.fecha-a.fecha}),this.chatAmigos=c,this.numMensaje=c.length})),this.subs.push(this.peticiones.newMensaje().subscribe(c=>{this.newMensaje=c})),this.subs.push(this.peticiones.getSolicitudes().subscribe(c=>{this.mySolicitudes=c,this.numSolicitudes=c.length})),this.subs.push(this.peticiones.newSolicitud().subscribe(c=>{this.newSolicitud=c[0]})),this.subs.push(this.peticiones.getNotificaciones().subscribe(c=>{this.myNotificaciones=c})),this.subs.push(this.peticiones.newNotificacion().subscribe(c=>{this.newNotificaciones=c[0]})),this.route.url.subscribe(c=>{var a;this.url=null===(a=c[0])||void 0===a?void 0:a.path}),this.subs.push(this.peticiones.getUser().subscribe(c=>{var a;c.imagen&&(this.imagen=c.imagen,null===(a=this.spanImagen)||void 0===a||a.forEach(f=>{f.nativeElement.classList.remove("d-none"),f.nativeElement.src=this.assets+this.imagen})),this.cambios.detectChanges()}))}ngAfterViewInit(){this.displayNone(this.divMensajes.nativeElement,this.botonMensajes.nativeElement),this.displayNone(this.divNotificaciones.nativeElement,this.botonNotificaciones.nativeElement),this.displayNone(this.divSolicitudes.nativeElement,this.botonSolicitudes.nativeElement),this.displayNone(this.divPerfil.first.nativeElement,this.botonPefil.first.nativeElement),this.displayNone(this.divPerfil.last.nativeElement,this.botonPefil.last.nativeElement),this.sockets()}ngOnDestroy(){var c;document.removeAllListeners(),this.botonNotificaciones.nativeElement.removeAllListeners(),this.botonSolicitudes.nativeElement.removeAllListeners(),this.botonMensajes.nativeElement.removeAllListeners(),null===(c=this.subs)||void 0===c||c.forEach(a=>{a.unsubscribe()})}buscarAmigo(c){c.value&&(this.buscar=this.link+this.busqueda.value,c.value="",this.router.navigate([this.buscar]),this.cambios.detectChanges())}displayNone(c,a){a.addEventListener("click",f=>{document.querySelectorAll(".divMenu").forEach(E=>{c.contains(E)||E.classList.add("d-none")}),f.stopPropagation(),this.selectAmigo.fideElement(c),this.render.setStyle(c,"left",`${a.offsetLeft}px`),window.addEventListener("resize",()=>{this.render.setStyle(c,"left",`${a.offsetLeft}px`)})}),this.render.listen("document","click",f=>{this.selectAmigo.fideOut(c)})}divNone(c){this.selectAmigo.fideElement(c)}mensajesAmigo(){this.selectAmigo.displayNone=!0}cerrarSession(){this.subs.push(this.peticionesService.cerrarSession().subscribe(()=>{this.router.navigate(["/session"])},c=>{console.log(c)}))}notNewMensaje(c=!1){var a;c&&(null===(a=this.subs)||void 0===a||a.forEach(f=>{f.unsubscribe()}),this.router.navigate(["/mensajes"])),this.subs.push(this.peticiones.notNewMensaje().subscribe(()=>{this.newMensaje.mensaje=!1}))}noNewSolicitud(c=!1){var a;c&&(null===(a=this.subs)||void 0===a||a.forEach(f=>{f.unsubscribe()}),this.router.navigate(["/solicitudes"])),this.newSolicitud&&this.subs.push(this.peticiones.noNewSolicitud().subscribe(()=>{this.newSolicitud.solicitud=!1}))}noNewNotificacion(c=!1){var a;c&&(null===(a=this.subs)||void 0===a||a.forEach(f=>{f.unsubscribe()}),this.router.navigate(["/notificaciones"])),this.subs.push(this.peticiones.noNewNotificacion().subscribe(()=>{this.newNotificaciones.likes=!1,this.newNotificaciones.comentario=!1}))}chatResponsive(){var c;null===(c=this.subs)||void 0===c||c.forEach(a=>{a.unsubscribe()}),this.router.navigate(["/amigos-activos"])}sockets(){this.peticiones.getUser().subscribe(c=>{const a=(0,o.io)(r.N.socket);a.on("connect",()=>{}),a.on(`${c.id}-chatMensajes`,f=>{this.subs.push(this.peticiones.getChatUser().subscribe(E=>{E.sort(function(L,Y){return Y.fecha-L.fecha}),this.chatAmigos=E,this.numMensaje=E.length})),this.subs.push(this.peticiones.newMensaje().subscribe(E=>{this.newMensaje=E}))}),a.on(`${c.id}-solicitudes`,()=>{this.subs.push(this.peticiones.getSolicitudes().subscribe(f=>{this.mySolicitudes=f,this.numSolicitudes=f.length})),this.subs.push(this.peticiones.newSolicitud().subscribe(f=>{this.newSolicitud=f[0]}))}),a.on(`${c.id}-myNotificaciones`,()=>{this.subs.push(this.peticiones.getNotificaciones().subscribe(f=>{this.myNotificaciones=f})),this.subs.push(this.peticiones.newNotificacion().subscribe(f=>{this.newNotificaciones=f[0]}))})})}}return d.\u0275fac=function(c){return new(c||d)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(e.Qsj),e.Y36(y.g),e.Y36(M.x),e.Y36(N.i),e.Y36(e.sBO),e.Y36(M.x))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-menu"]],viewQuery:function(c,a){if(1&c&&(e.Gf(de,5),e.Gf(fe,5),e.Gf(ie,5),e.Gf(ne,5),e.Gf(se,5),e.Gf(ge,5),e.Gf(ve,5),e.Gf(oe,5),e.Gf(re,5)),2&c){let f;e.iGM(f=e.CRH())&&(a.divSolicitudes=f.first),e.iGM(f=e.CRH())&&(a.divNotificaciones=f.first),e.iGM(f=e.CRH())&&(a.divMensajes=f.first),e.iGM(f=e.CRH())&&(a.botonSolicitudes=f.first),e.iGM(f=e.CRH())&&(a.botonMensajes=f.first),e.iGM(f=e.CRH())&&(a.botonNotificaciones=f.first),e.iGM(f=e.CRH())&&(a.divPerfil=f),e.iGM(f=e.CRH())&&(a.botonPefil=f),e.iGM(f=e.CRH())&&(a.spanImagen=f)}},decls:164,vars:72,consts:[[1,"menu","position-fixed","z-500",2,"top","0px"],[1,"mx-auto","select-off","position-fixed","z-500","centrar-fixed-h","min-600",2,"width","100%"],[1,"row"],[1,"col-4","d-flex","align-items-center","menu-content","position-relative"],[1,"m-0","ms-4","p-0"],[1,"hover-off","active-off","w-100","r-btn"],["routerLink","/home","routerLinkActive","",1,"text-decoration-none"],["home","routerLinkActive"],[1,"fs-2","span-icon",3,"ngClass"],[1,"m-0","p-0"],["botonMensajes",""],[1,"hover-off","active-off","w-100","r-btn","position-relative",3,"ngClass","click"],[1,"divMenu","position-absolute","rounded-3","sombra-nav","py-4","px-0","d-none",3,"ngStyle"],["divMensajes",""],[3,"chatAmigo","click",4,"ngFor","ngForOf"],["class","max-600-post h-100 py-3 mb-3 mx-auto d-block rounded-3 scroll","style","width: 100%; overflow-x: hidden !important",4,"ngIf"],[1,"roboto","gris","size-parrafo","h-fit","text-center",2,"margin-bottom","-10px","margin-top","15px"],["routerLink","/mensajes","routerLinkActive","",1,"text-decoration-none","dark","select-pointer","link-hover",3,"click"],["mensajes","routerLinkActive"],["botonSolicitudes",""],[1,"divMenu","position-absolute","rounded-3","sombra-nav","py-4","d-none",3,"ngStyle"],["divSolicitudes",""],[3,"solicitud",4,"ngFor","ngForOf"],["routerLink","/solicitudes","routerLinkActive","",1,"text-decoration-none","dark","select-pointer","link-hover",3,"click"],["solicitudes","routerLinkActive"],["botonNotificaciones",""],[1,"hover-off","active-off","w-100","r-btn","position-relative","new",3,"ngClass","click"],["divNotificaciones",""],[3,"notificacion",4,"ngFor","ngForOf"],["routerLink","/notificaciones","routerLinkActive","",1,"text-decoration-none","dark","select-pointer","link-hover",3,"click"],["notificacion","routerLinkActive"],[1,"col-4","d-flex","justify-content-center","align-content-center","menu-content"],[1,"d-flex","material-icons","fs-1","h-0","my-auto","mx-1","select-pointer"],["botonPefil",""],["class","material-icons position-relative","style","font-size: 37px",4,"ngIf"],[1,"d-none","rounded-circle","mt-1",2,"width","50px !important","height","30px !important"],["spanImagen",""],[1,"h-0","my-auto","segoepr","size-parrafo","dark","fw-bold","ellipsis","w-100","text-nowrap","overflow-hidden","ms-2"],[1,"divMenu","w-fit","h-fit","position-absolute","rounded-3","sombra-nav","py-4","d-none",2,"top","-10px","background","white"],["divPerfil",""],["routerLink","/perfil","routerLinkActive","",1,"text-decoration-none","select-pointer","link-hover","m-0","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3","py-1"],[1,"material-icons-outlined","pe-2",2,"font-size","30px"],[1,"my-auto"],["routerLink","/perfil/amigos","routerLinkActive","",1,"text-decoration-none","select-pointer","link-hover","m-0","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3","py-1"],["routerLink","/perfil/configuracion","routerLinkActive","",1,"text-decoration-none","select-pointer","link-hover","m-0","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3","py-1"],["routerLink","/perfil/sobre-mi","routerLinkActive","",1,"text-decoration-none","select-pointer","link-hover","m-0","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3","py-1"],[1,"text-decoration-none","select-pointer","link-hover","m-0","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3",3,"click"],[1,"pe-5","col-4","d-flex","justify-content-end","align-content-end","menu-content","purpura"],[1,"material-icons","fs-2","h-0","my-auto","mx-2",2,"color","#76289b"],["spellcheck","false","type","text","placeholder","Buscar amigo",1,"h-50","border-0","my-auto","select-on","outline-off","input-buscar",2,"width","120px !important",3,"formControl","keyup.enter"],["input1","","inputBusqueda",""],[1,"mx-auto","select-off","position-fixed","z-500","centrar-fixed-h","max-600",2,"width","100%"],[1,"ps-4","col-4","d-flex","justify-content-center","align-content-center","menu-content","purpura"],[1,"material-icons","fs-2","h-0","my-auto",2,"color","#76289b"],["spellcheck","false","type","text","placeholder","Buscar",1,"mx-1","h-50","w-100","border-0","my-auto","select-on","outline-off","input-buscar","ellipsis",3,"formControl","keyup.enter"],["input2",""],[1,"select-pointer","link-hover","m-0","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3"],[1,"material-icons-outlined",2,"font-size","30px"],["routerLink","/perfil","routerLinkActive","",1,"ps-2","my-auto","text-decoration-none","dark","link-hover"],[1,"select-pointer","link-hover","m-0","mt-2","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3"],["routerLink","/perfil/amigos","routerLinkActive","",1,"ps-2","my-auto","text-decoration-none","dark"],["routerLink","/perfil/sobre-mi","routerLinkActive","",1,"ps-2","my-auto","text-decoration-none","dark"],["routerLink","/perfil/configuracion","routerLinkActive","",1,"ps-2","my-auto","text-decoration-none","dark"],[1,"select-pointer","link-hover","m-0","mt-2","d-flex","roboto","gris","size-parrafo","h-fit","text-center","px-3",3,"click"],[1,"ps-2","my-auto","text-decoration-none","dark"],[1,"w-100","m-0","p-0"],[1,"hover-off","active-off","r-btn","position-relative","mx-auto",3,"ngClass","click"],[1,"text-decoration-none","dark","select-pointer","link-hover"],[1,"fs-1","span-icon",3,"ngClass"],[1,"z-500","menu-movil","bg-white",2,"width","100%","height","50px","position","fixed","bottom","0","justify-content","center","align-items","center"],[1,"h-fit","mx-3","w-fit","hover-off","select-off","active-off","r-btn"],["routerLink","/home",1,"text-decoration-none","select-pointer"],[1,"h-fit","mx-3","w-fit","hover-off","select-off","active-off","r-btn","position-relative"],[1,"text-decoration-none","select-pointer",3,"ngClass","click"],[1,"text-decoration-none","select-pointer",3,"click"],[3,"chatAmigo","click"],[1,"max-600-post","h-100","py-3","mb-3","mx-auto","d-block","rounded-3","scroll",2,"width","100%","overflow-x","hidden !important"],[1,"segoepr","size-opciones","gris-claro",2,"display","flex","margin","auto 20px"],[3,"solicitud"],[3,"notificacion"],[1,"material-icons","position-relative",2,"font-size","37px"]],template:function(c,a){if(1&c){const f=e.EpF();e._UZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.TgZ(6,"a",6,7),e.TgZ(8,"span",8),e._uU(9," home "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9,10),e.TgZ(12,"button",11),e.NdJ("click",function(){return a.notNewMensaje()}),e.TgZ(13,"span",8),e._uU(14," mail "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"section",12,13),e.YNc(17,ae,1,1,"app-menu-mensaje-amigo",14),e.YNc(18,$,3,0,"div",15),e.TgZ(19,"p",16),e.TgZ(20,"a",17,18),e.NdJ("click",function(){e.CHM(f);const L=e.MAs(16);return a.divNone(L)}),e._uU(22," Ir a mensajes"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",9,19),e.TgZ(25,"button",11),e.NdJ("click",function(){return a.noNewSolicitud()}),e.TgZ(26,"span",8),e._uU(27," person "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"section",20,21),e.YNc(30,_e,1,1,"app-solicitudes",22),e.YNc(31,ye,3,0,"div",15),e.TgZ(32,"p",16),e.TgZ(33,"a",23,24),e.NdJ("click",function(){e.CHM(f);const L=e.MAs(29);return a.divNone(L)}),e._uU(35," Ir a solicitudes"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",9,25),e.TgZ(38,"button",26),e.NdJ("click",function(){return a.noNewNotificacion()}),e.TgZ(39,"span",8),e._uU(40," notifications "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(41,"section",20,27),e.YNc(43,be,1,1,"app-notificacion",28),e.YNc(44,Ae,3,0,"div",15),e.TgZ(45,"p",16),e.TgZ(46,"a",29,30),e.NdJ("click",function(){e.CHM(f);const L=e.MAs(42);return a.divNone(L)}),e._uU(48," Ir a notificaciones"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",31),e.TgZ(50,"blockquote",32,33),e.YNc(52,K,2,0,"span",34),e._UZ(53,"img",35,36),e.TgZ(55,"p",37),e._uU(56),e.qZA(),e.qZA(),e.TgZ(57,"section",38,39),e.TgZ(59,"a",40,30),e.TgZ(61,"span",41),e._uU(62," account_circle "),e.qZA(),e.TgZ(63,"p",42),e._uU(64,"Perfil"),e.qZA(),e.qZA(),e.TgZ(65,"a",43,30),e.TgZ(67,"span",41),e._uU(68," group "),e.qZA(),e.TgZ(69,"p",42),e._uU(70,"Amigos"),e.qZA(),e.qZA(),e.TgZ(71,"a",44,30),e.TgZ(73,"span",41),e._uU(74," settings "),e.qZA(),e.TgZ(75,"p",42),e._uU(76,"Configuracion"),e.qZA(),e.qZA(),e.TgZ(77,"a",45,30),e.TgZ(79,"span",41),e._uU(80," library_books "),e.qZA(),e.TgZ(81,"p",42),e._uU(82,"Sobre mi"),e.qZA(),e.qZA(),e.TgZ(83,"a",46),e.NdJ("click",function(){return a.cerrarSession()}),e.TgZ(84,"span",41),e._uU(85," logout "),e.qZA(),e.TgZ(86,"p",42),e._uU(87,"Salir"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(88,"div",47),e.TgZ(89,"span",48),e._uU(90," search "),e.qZA(),e.TgZ(91,"input",49,50),e.NdJ("keyup.enter",function(){e.CHM(f);const L=e.MAs(92);return a.buscarAmigo(L)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(94,"div",51),e.TgZ(95,"div",2),e.TgZ(96,"div",52),e.TgZ(97,"span",53),e._uU(98," search "),e.qZA(),e.TgZ(99,"input",54,55),e.NdJ("keyup.enter",function(){e.CHM(f);const L=e.MAs(100);return a.buscarAmigo(L)}),e.qZA(),e.qZA(),e.TgZ(101,"div",31),e.TgZ(102,"blockquote",32,33),e.YNc(104,ce,2,0,"span",34),e._UZ(105,"img",35,36),e.TgZ(107,"p",37),e._uU(108),e.qZA(),e.qZA(),e.TgZ(109,"section",38,39),e.TgZ(111,"p",56),e.TgZ(112,"span",57),e._uU(113," account_circle "),e.qZA(),e.TgZ(114,"a",58,30),e._uU(116," Perfil"),e.qZA(),e.qZA(),e.TgZ(117,"p",59),e.TgZ(118,"span",57),e._uU(119," group "),e.qZA(),e.TgZ(120,"a",60,30),e._uU(122," Amigos"),e.qZA(),e.qZA(),e.TgZ(123,"p",59),e.TgZ(124,"span",57),e._uU(125," library_books "),e.qZA(),e.TgZ(126,"a",61,30),e._uU(128," Sobre mi"),e.qZA(),e.qZA(),e.TgZ(129,"p",59),e.TgZ(130,"span",57),e._uU(131," settings "),e.qZA(),e.TgZ(132,"a",62,30),e._uU(134," Configuracion"),e.qZA(),e.qZA(),e.TgZ(135,"p",63),e.NdJ("click",function(){return a.cerrarSession()}),e.TgZ(136,"span",57),e._uU(137," logout "),e.qZA(),e.TgZ(138,"a",64),e._uU(139," Salir"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(140,"div",3),e.TgZ(141,"div",65,25),e.TgZ(143,"button",66),e.NdJ("click",function(){return a.noNewNotificacion(!0)}),e.TgZ(144,"a",67),e.TgZ(145,"span",68),e._uU(146," notifications "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(147,"div",69),e.TgZ(148,"button",70),e.TgZ(149,"a",71),e.TgZ(150,"span",68),e._uU(151," home "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(152,"button",72),e.TgZ(153,"a",73),e.NdJ("click",function(){return a.notNewMensaje(!0)}),e.TgZ(154,"span",68),e._uU(155," email "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(156,"button",72),e.TgZ(157,"a",73),e.NdJ("click",function(){return a.noNewSolicitud(!0)}),e.TgZ(158,"span",68),e._uU(159," person "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(160,"button",72),e.TgZ(161,"a",74),e.NdJ("click",function(){return a.chatResponsive()}),e.TgZ(162,"span",68),e._uU(163," chat "),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&c){const f=e.MAs(7),E=e.MAs(21),L=e.MAs(34),Y=e.MAs(47);e.xp6(8),e.Q6J("ngClass",e.WLB(30,z,!f.isActive,f.isActive)),e.xp6(4),e.Q6J("ngClass",e.VKq(33,D,null==a.newMensaje?null:a.newMensaje.mensaje)),e.xp6(1),e.Q6J("ngClass",e.WLB(35,z,!E.isActive,E.isActive)),e.xp6(2),e.Q6J("ngStyle",e.DdM(38,H)),e.xp6(2),e.Q6J("ngForOf",a.chatAmigos),e.xp6(1),e.Q6J("ngIf",!a.numMensaje),e.xp6(7),e.Q6J("ngClass",e.VKq(39,D,null==a.newSolicitud?null:a.newSolicitud.solicitud)),e.xp6(1),e.Q6J("ngClass",e.WLB(41,z,!L.isActive,L.isActive)),e.xp6(2),e.Q6J("ngStyle",e.DdM(44,H)),e.xp6(2),e.Q6J("ngForOf",a.mySolicitudes),e.xp6(1),e.Q6J("ngIf",!a.numSolicitudes),e.xp6(7),e.Q6J("ngClass",e.VKq(45,D,(null==a.newNotificaciones?null:a.newNotificaciones.likes)||(null==a.newNotificaciones?null:a.newNotificaciones.comentario))),e.xp6(1),e.Q6J("ngClass",e.WLB(47,z,!Y.isActive,Y.isActive)),e.xp6(2),e.Q6J("ngStyle",e.DdM(50,H)),e.xp6(2),e.Q6J("ngForOf",a.myNotificaciones),e.xp6(1),e.Q6J("ngIf",!(null!=a.myNotificaciones&&a.myNotificaciones.length)),e.xp6(8),e.Q6J("ngIf",!a.imagen),e.xp6(4),e.hij(" ",null==a.usuario.datos?null:a.usuario.datos.nameUser," "),e.xp6(35),e.Q6J("formControl",a.busqueda),e.xp6(8),e.Q6J("formControl",a.busqueda),e.xp6(5),e.Q6J("ngIf",!a.imagen),e.xp6(4),e.hij(" ",null==a.usuario.datos?null:a.usuario.datos.nameUser," "),e.xp6(35),e.Q6J("ngClass",e.VKq(51,D,(null==a.newNotificaciones?null:a.newNotificaciones.likes)||(null==a.newNotificaciones?null:a.newNotificaciones.comentario))),e.xp6(2),e.Q6J("ngClass",e.WLB(53,z,!Y.isActive,Y.isActive)),e.xp6(5),e.Q6J("ngClass",e.WLB(56,z,!f.isActive,f.isActive)),e.xp6(3),e.Q6J("ngClass",e.VKq(59,D,null==a.newMensaje?null:a.newMensaje.mensaje)),e.xp6(1),e.Q6J("ngClass",e.WLB(61,z,"mensajes"!==a.url,"mensajes"===a.url)),e.xp6(3),e.Q6J("ngClass",e.VKq(64,D,null==a.newSolicitud?null:a.newSolicitud.solicitud)),e.xp6(1),e.Q6J("ngClass",e.WLB(66,z,"solicitudes"!==a.url,"solicitudes"===a.url)),e.xp6(4),e.Q6J("ngClass",e.WLB(69,z,"amigos-activos"!==a.url,"amigos-activos"===a.url))}},directives:[g.yS,g.Od,x.mk,x.PC,x.sg,x.O5,h.Fj,h.JJ,h.oH,w,B,me],styles:[".menu-movil[_ngcontent-%COMP%]{display:none;margin:0!important;padding:0!important;overflow:hidden}.input-buscar[_ngcontent-%COMP%]::placeholder{color:#76289b!important;font-weight:600;font-size:14px!important}.menu[_ngcontent-%COMP%]{height:60px;width:100%;background:white;box-shadow:0 1px 1px 1px #aaa3}.menu-content[_ngcontent-%COMP%]{margin-top:-60px;height:60px}.min-600[_ngcontent-%COMP%]{display:inherit!important}.max-900[_ngcontent-%COMP%]{display:none!important}.max-600[_ngcontent-%COMP%]{display:none!important}@media screen and (max-width: 900px){.min-900[_ngcontent-%COMP%]{display:none!important}.max-900[_ngcontent-%COMP%]{display:inherit!important}}@media screen and (max-width: 600px){.menu-movil[_ngcontent-%COMP%]{display:flex;border-top:1px solid #d1d1d1!important}.menu[_ngcontent-%COMP%]{box-shadow:none!important;border-bottom:1px solid #d1d1d1!important}.max-600[_ngcontent-%COMP%]{display:initial!important}.min-600[_ngcontent-%COMP%]{display:none!important}.input-buscar[_ngcontent-%COMP%]::placeholder{font-size:13px!important}}"]}),d})()},9970:(P,T,l)=>{"use strict";l.d(T,{J:()=>h});var o=l(8720),r=l(141);let h=(()=>{class e{constructor(y){this.selectAmigo=y}ngOnInit(){}}return e.\u0275fac=function(y){return new(y||e)(o.Y36(r.g))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-no-post"]],decls:5,vars:0,consts:[[1,"max-600-post","h-100","py-3","mb-3","mx-auto","d-block","rounded-3","scroll",2,"width","100%","overflow-x","hidden"],["appAllSolicitudes",""],[1,"segoepr","size-nombres","text-center","gris-claro"],["id","fondoImagen","src","../../../assets/imagenes/post3.svg","alt","",2,"margin-top","70px"]],template:function(y,M){1&y&&(o.TgZ(0,"div",0,1),o.TgZ(2,"h1",2),o._uU(3," Todav\xeda no hay post publicados "),o.qZA(),o._UZ(4,"img",3),o.qZA())},styles:[".max-600-post[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{width:90%!important}#fondoImagen[_ngcontent-%COMP%]{width:60%;display:flex;margin:30px auto auto;text-align:center}@media screen and (max-width: 600px){#fondoImagen[_ngcontent-%COMP%]{width:80%}}@media screen and (max-width: 600px){.max-600-post[_ngcontent-%COMP%]{width:100%!important;box-shadow:none!important;display:block!important;padding:10px 0 0!important;border-radius:0!important;margin:0!important}.max-600-post[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{width:100%!important}#fondoImagen[_ngcontent-%COMP%]{margin-bottom:80px}}"]}),e})()},9910:(P,T,l)=>{"use strict";l.d(T,{A:()=>A});var o=l(8720),r=l(5228),h=l(5127),e=l(8583),g=l(6326),y=l(665),M=l(3589),N=l(2340),x=l(8939);function R(v,b){if(1&v&&(o.TgZ(0,"a",4),o._uU(1),o.qZA()),2&v){const m=b.ngIf;o.xp6(1),o.hij("",null==m[0]?null:m[0].nameUser," ")}}let j=(()=>{class v{constructor(m,u){this.peticiones=m,this.cambios=u}ngOnInit(){this.nameUser=this.peticiones.getNameUser(this.comentario.idAmigo).pipe((0,x.x)(()=>{this.cambios.detectChanges()}))}log(m){console.log(m),this.cambios.detectChanges()}}return v.\u0275fac=function(m){return new(m||v)(o.Y36(h.x),o.Y36(o.sBO))},v.\u0275cmp=o.Xpm({type:v,selectors:[["app-un-comentario"]],inputs:{comentario:"comentario"},decls:6,vars:4,consts:[[1,"pt-3","max-600-un-comentario"],[1,"segoepr","m-0","p-0","dark","size-comentarios","fw-bold","select-text"],["routerLink","/person/miguelValero","class","text-decoration-none dark link-hover",4,"ngIf"],[1,"segoepr","size-comentarios","gris-claro","m-0","p-0","select-text",2,"width","100%"],["routerLink","/person/miguelValero",1,"text-decoration-none","dark","link-hover"]],template:function(m,u){1&m&&(o.TgZ(0,"div",0),o.TgZ(1,"p",1),o.YNc(2,R,2,1,"a",2),o.ALo(3,"async"),o.qZA(),o.TgZ(4,"p",3),o._uU(5),o.qZA(),o.qZA()),2&m&&(o.xp6(2),o.Q6J("ngIf",o.lcZ(3,2,u.nameUser)),o.xp6(3),o.hij(" ",u.comentario.texto," "))},directives:[e.O5,g.yS],pipes:[e.Ov],styles:["@media screen and (max-width: 600px){.max-600-un-comentario[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%!important;word-wrap:normal;flex-wrap:wrap;overflow-wrap:break-word;display:block}}"],changeDetection:0}),v})();function S(v,b){if(1&v&&(o.TgZ(0,"div"),o._UZ(1,"app-un-comentario",12),o.qZA()),2&v){const m=b.$implicit;o.xp6(1),o.Q6J("comentario",m)}}const J=function(v){return{"d-none":v}};let U=(()=>{class v{constructor(m,u){this.peticiones=m,this.cambios=u,this.comentario=new y.NI(""),this.activeComentario=!0,this.favorite=!1,this.subs=[]}ngOnInit(){const m=(0,M.io)(N.N.socket);m.on("connect",()=>{}),m.on(`${this.post.id}-comentario`,u=>{this.getComentarios=u,this.cambios.detectChanges()}),m.on(`${this.post.id}-likes`,u=>{this.numberLike=u,this.cambios.detectChanges()}),this.subs.push(this.peticiones.getComentarios(this.post.id).subscribe(u=>{this.getComentarios=u,this.cambios.detectChanges()})),this.subs.push(this.peticiones.getLikes(this.post.id).subscribe(u=>{this.numberLike=u,this.cambios.detectChanges()},u=>{console.log(u),this.cambios.detectChanges()})),this.subs.push(this.peticiones.myLike(this.post.id).subscribe(u=>{this.myLike=u.length,this.cambios.detectChanges()},u=>{console.log(u),this.cambios.detectChanges()}))}addComentario(m){m.value="",this.subs.push(this.peticiones.addComentario({idPost:this.post.id,idUser:this.post.idUser,texto:this.comentario.value}).subscribe(u=>{this.cambios.detectChanges()},u=>{console.log(u)}))}addLike(){this.subs.push(this.peticiones.addLike({idPost:this.post.id,idAmigo:this.post.idUser}).subscribe(m=>{this.myLike=m.length,this.cambios.detectChanges()},m=>{console.log(m),this.cambios.detectChanges()}))}ngOnDestroy(){var m;null===(m=this.subs)||void 0===m||m.forEach(u=>{u.unsubscribe()})}}return v.\u0275fac=function(m){return new(m||v)(o.Y36(h.x),o.Y36(o.sBO))},v.\u0275cmp=o.Xpm({type:v,selectors:[["app-comentarios"]],inputs:{post:"post"},decls:17,vars:8,consts:[[1,"d-flex","position-relative","h-fit","pt-3","mx-auto","max-600-comentarios",2,"width","92%"],["id","comentario",1,"select-pointer","size-opciones","d-flex","h-fit","my-auto","w-fit","roboto","gris-claro","m-0","p-0",3,"click"],[1,"material-icons"],[1,"segoepr","size-nombres",2,"position","absolute","right","50px","top","16px"],[1,"material-icons","centrar-fixed-v","select-pointer",2,"position","absolute","right","10px","font-size","35px","top","25px",3,"click"],[1,"d-b","position-relative","mt-4","h-fit","mx-auto","max-600-comentarios",2,"width","90%",3,"ngClass"],[1,"d-block","position-relative"],["spellcheck","false","autocomplete","off","type","text","placeholder","Comentar",1,"py-2","h-50","border-0","border-bottom","my-auto","select-on","outline-off",2,"width","100%","border-color","#3e3e3e !important","outline","none","padding-right","40px !important",3,"formControl","keyup.enter"],["input",""],[1,"material-icons",2,"position","absolute","bottom","10px","margin-left","-30px",3,"click"],[1,"d-block","ellipsis","my-3","position-relative","overflow-visible",2,"width","92%"],[4,"ngFor","ngForOf"],[3,"comentario"]],template:function(m,u){if(1&m){const O=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"p",1),o.NdJ("click",function(){return u.activeComentario=!u.activeComentario}),o._uU(2," Comentarios "),o.TgZ(3,"span",2),o._uU(4),o.qZA(),o.qZA(),o.TgZ(5,"small",3),o._uU(6),o.qZA(),o.TgZ(7,"span",4),o.NdJ("click",function(){return u.addLike()}),o._uU(8),o.qZA(),o.qZA(),o.TgZ(9,"div",5),o.TgZ(10,"div",6),o.TgZ(11,"input",7,8),o.NdJ("keyup.enter",function(){o.CHM(O);const V=o.MAs(12);return u.addComentario(V)}),o.qZA(),o.TgZ(13,"span",9),o.NdJ("click",function(){o.CHM(O);const V=o.MAs(12);return u.addComentario(V)}),o._uU(14," send "),o.qZA(),o.qZA(),o.TgZ(15,"div",10),o.YNc(16,S,2,1,"div",11),o.qZA(),o.qZA()}2&m&&(o.xp6(4),o.Oqu(u.activeComentario?"expand_less":"expand_more"),o.xp6(2),o.Oqu(u.numberLike),o.xp6(2),o.hij("",u.myLike?"favorite":"favorite_border"," "),o.xp6(1),o.Q6J("ngClass",o.VKq(6,J,u.activeComentario)),o.xp6(2),o.Q6J("formControl",u.comentario),o.xp6(5),o.Q6J("ngForOf",u.getComentarios))},directives:[e.mk,y.Fj,y.JJ,y.oH,e.sg,j],styles:[".inactivoComentario[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 600px){.max-600-comentarios[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .max-600-comentarios[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%!important}.max-600-comentarios[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:-6px}.max-600-comentarios[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px!important}.max-600-comentarios[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .max-600-comentarios[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:13px!important}}"],changeDetection:0}),v})();const I=["spanImagen"];function w(v,b){1&v&&(o.TgZ(0,"span",11),o._uU(1," account_circle "),o.qZA())}let A=(()=>{class v{constructor(m,u,O){this.usuario=m,this.cambios=u,this.peticion=O,this.assets="https://bucket-80hwyd.s3.amazonaws.com/",this.imagen=null,this.subs=[]}ngOnInit(){var m;this.post.imagen&&(this.imagenPost=this.assets+this.post.imagen),this.url=this.post.idUser===(null===(m=this.usuario.datos)||void 0===m?void 0:m.id)?"/perfil":`/person/${this.post.idUser}`,this.subs.push(this.peticion.getPersonUser(this.post.idUser).subscribe(u=>{this.nameUser=u.nameUser,u.imagen&&(this.imagen=u.imagen,this.spanImagen.nativeElement.classList.remove("d-none"),this.spanImagen.nativeElement.src=this.assets+this.imagen),this.cambios.detectChanges()}))}ngOnDestroy(){var m;null===(m=this.subs)||void 0===m||m.forEach(u=>{u.unsubscribe()})}log(m){console.log(m),this.cambios.detectChanges()}}return v.\u0275fac=function(m){return new(m||v)(o.Y36(r.i),o.Y36(o.sBO),o.Y36(h.x))},v.\u0275cmp=o.Xpm({type:v,selectors:[["app-post"]],viewQuery:function(m,u){if(1&m&&o.Gf(I,5),2&m){let O;o.iGM(O=o.CRH())&&(u.spanImagen=O.first)}},inputs:{post:"post"},decls:13,vars:6,consts:[[1,"select-off","mb-4","mx-auto","d-block","sombra","rounded-3","max-600-post",2,"width","100%"],["appPost",""],[1,"d-flex","flex-fill","ellipsis","mx-auto","position-relative","overflow-visible",2,"width","92%"],["class","material-icons position-relative","style","font-size: 50px",4,"ngIf"],[1,"d-none","mt-1","rounded-circle","imagenPost"],["spanImagen",""],[1,"segoepr","w-50","dark","size-opciones","fw-bold","my-auto","ms-3","h-fit"],[1,"text-decoration-none","dark","link-hover",3,"routerLink"],[1,"mt-2","segoepr","size-opciones","gris-claro","mx-auto","select-text",2,"width","92%"],["alt","",1,"d-flex","mx-auto","imagen",2,"width","92%",3,"src"],[3,"post"],[1,"material-icons","position-relative",2,"font-size","50px"]],template:function(m,u){1&m&&(o.TgZ(0,"div",0,1),o.TgZ(2,"div",2),o.YNc(3,w,2,0,"span",3),o._UZ(4,"img",4,5),o.TgZ(6,"p",6),o.TgZ(7,"a",7),o._uU(8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"p",8),o._uU(10),o.qZA(),o._UZ(11,"img",9),o._UZ(12,"app-comentarios",10),o.qZA()),2&m&&(o.xp6(3),o.Q6J("ngIf",!u.imagen),o.xp6(4),o.s9C("routerLink",u.url),o.xp6(1),o.hij(" ",u.nameUser,""),o.xp6(2),o.hij(" ",u.post.texto," "),o.xp6(1),o.Q6J("src",u.imagenPost,o.LSH),o.xp6(1),o.Q6J("post",u.post))},directives:[e.O5,g.yS,U],styles:[".max-600-post[_ngcontent-%COMP%]{padding-top:10px!important;padding-bottom:10px!important}.max-600-post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px}.imagenPost[_ngcontent-%COMP%]{width:45px;height:45px}@media screen and (max-width: 600px){.max-600-post[_ngcontent-%COMP%]{width:100%!important;box-shadow:none!important;display:block!important;padding:10px 0 15px!important;border-radius:0!important;margin:0!important;border-bottom:1px solid #d1d1d1}.max-600-post[_ngcontent-%COMP%]   .imagen[_ngcontent-%COMP%]{width:100%!important;border-radius:0}.max-600-post[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:92%!important}.max-600-post[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:40px!important}.max-600-post[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:auto auto auto 10px!important}.imagenPost[_ngcontent-%COMP%]{width:37px!important;height:37px!important}}"],changeDetection:0}),v})()},4466:(P,T,l)=>{"use strict";l.d(T,{m:()=>g});var o=l(8583),r=l(6326),h=l(665),e=l(8720);let g=(()=>{class y{}return y.\u0275fac=function(N){return new(N||y)},y.\u0275mod=e.oAB({type:y}),y.\u0275inj=e.cJS({imports:[[o.ez,r.Bz,h.UX]]}),y})()},3589:(P,T,l)=>{"use strict";l.d(T,{io:()=>he});var o={};l.r(o),l.d(o,{Decoder:()=>Te,Encoder:()=>Se,PacketType:()=>Z,protocol:()=>Pe});var r=l(4171),e=l(4966);const g="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function y(s){const t=s.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||e))return new XMLHttpRequest}catch(i){}if(!t)try{return new(g[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(i){}}function M(s,...t){return t.reduce((i,n)=>(s.hasOwnProperty(n)&&(i[n]=s[n]),i),{})}const N=setTimeout,x=clearTimeout;function R(s,t){t.useNativeTimers?(s.setTimeoutFn=N.bind(g),s.clearTimeoutFn=x.bind(g)):(s.setTimeoutFn=setTimeout.bind(g),s.clearTimeoutFn=clearTimeout.bind(g))}var j=l(8573);const S=Object.create(null);S.open="0",S.close="1",S.ping="2",S.pong="3",S.message="4",S.upgrade="5",S.noop="6";const J=Object.create(null);Object.keys(S).forEach(s=>{J[S[s]]=s});const U={type:"error",data:"parser error"},I="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),w="function"==typeof ArrayBuffer,b=(s,t)=>{const i=new FileReader;return i.onload=function(){const n=i.result.split(",")[1];t("b"+n)},i.readAsDataURL(s)},m=({type:s,data:t},i,n)=>I&&t instanceof Blob?i?n(t):b(t,n):w&&(t instanceof ArrayBuffer||(s=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer)(t))?i?n(t):b(new Blob([t]),n):n(S[s]+(t||""));for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="undefined"==typeof Uint8Array?[]:new Uint8Array(256),B=0;B<u.length;B++)O[u.charCodeAt(B)]=B;const me="function"==typeof ArrayBuffer,fe=(s,t)=>{if(me){const i=function(s){var n,_,k,q,F,t=.75*s.length,i=s.length,p=0;"="===s[s.length-1]&&(t--,"="===s[s.length-2]&&t--);var ee=new ArrayBuffer(t),W=new Uint8Array(ee);for(n=0;n<i;n+=4)_=O[s.charCodeAt(n)],k=O[s.charCodeAt(n+1)],q=O[s.charCodeAt(n+2)],F=O[s.charCodeAt(n+3)],W[p++]=_<<2|k>>4,W[p++]=(15&k)<<4|q>>2,W[p++]=(3&q)<<6|63&F;return ee}(s);return ie(i,t)}return{base64:!0,data:s}},ie=(s,t)=>{switch(t){case"blob":return s instanceof ArrayBuffer?new Blob([s]):s;case"arraybuffer":default:return s}},ne=(s,t)=>{if("string"!=typeof s)return{type:"message",data:ie(s,t)};const i=s.charAt(0);return"b"===i?{type:"message",data:fe(s.substring(1),t)}:J[i]?s.length>1?{type:J[i],data:s.substring(1)}:{type:J[i]}:U},se=String.fromCharCode(30);class re extends j.Q{constructor(t){super(),this.writable=!1,R(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,i){const n=new Error(t);return n.type="TransportError",n.description=i,super.emit("error",n),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const i=ne(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}var ae=l(5391),$=l(9603);class _e extends re{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this.polling||!this.writable){let n=0;this.polling&&(n++,this.once("pollComplete",function(){--n||i()})),this.writable||(n++,this.once("drain",function(){--n||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){((s,t)=>{const i=s.split(se),n=[];for(let p=0;p<i.length;p++){const _=ne(i[p],t);if(n.push(_),"error"===_.type)break}return n})(t,this.socket.binaryType).forEach(n=>{if("opening"===this.readyState&&"open"===n.type&&this.onOpen(),"close"===n.type)return this.onClose(),!1;this.onPacket(n)}),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const t=()=>{this.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}write(t){this.writable=!1,((s,t)=>{const i=s.length,n=new Array(i);let p=0;s.forEach((_,k)=>{m(_,!1,q=>{n[k]=q,++p===i&&t(n.join(se))})})})(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emit("drain")})})}uri(){let t=this.query||{};const i=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ae()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.opts.port&&("https"===i&&443!==Number(this.opts.port)||"http"===i&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const p=$.encode(t);return i+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(p.length?"?"+p:"")}}function ye(){}const be=null!=new y({xdomain:!1}).responseType;let K=(()=>{class s extends j.Q{constructor(i,n){super(),R(this,n),this.opts=n,this.method=n.method||"GET",this.uri=i,this.async=!1!==n.async,this.data=void 0!==n.data?n.data:null,this.create()}create(){const i=M(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this.opts.xd,i.xscheme=!!this.opts.xs;const n=this.xhr=new y(i);try{n.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let p in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(p)&&n.setRequestHeader(p,this.opts.extraHeaders[p])}}catch(p){}if("POST"===this.method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(p){}try{n.setRequestHeader("Accept","*/*")}catch(p){}"withCredentials"in n&&(n.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(n.timeout=this.opts.requestTimeout),n.onreadystatechange=()=>{4===n.readyState&&(200===n.status||1223===n.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof n.status?n.status:0)},0))},n.send(this.data)}catch(p){return void this.setTimeoutFn(()=>{this.onError(p)},0)}"undefined"!=typeof document&&(this.index=s.requestsCount++,s.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(i){this.emit("data",i),this.onSuccess()}onError(i){this.emit("error",i),this.cleanup(!0)}cleanup(i){if(null!=this.xhr){if(this.xhr.onreadystatechange=ye,i)try{this.xhr.abort()}catch(n){}"undefined"!=typeof document&&delete s.requests[this.index],this.xhr=null}}onLoad(){const i=this.xhr.responseText;null!==i&&this.onData(i)}abort(){this.cleanup()}}return s.requestsCount=0,s.requests={},s})();function ce(){for(let s in K.requests)K.requests.hasOwnProperty(s)&&K.requests[s].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",ce):"function"==typeof addEventListener&&addEventListener("onpagehide"in g?"pagehide":"unload",ce,!1));const z="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,i)=>i(t,0),D=g.WebSocket||g.MozWebSocket,d="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class C extends re{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),i=this.opts.protocols,n=d?{}:M(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=d?new D(t,i,n):i?new D(t,i):new D(t)}catch(p){return this.emit("error",p)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const p=i===t.length-1;m(t[i],this.supportsBinary,_=>{try{this.ws.send(_)}catch(q){}p&&z(()=>{this.writable=!0,this.emit("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const i=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===i&&443!==Number(this.opts.port)||"ws"===i&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=ae()),this.supportsBinary||(t.b64=1);const p=$.encode(t);return i+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(p.length?"?"+p:"")}check(){return!(!D||"__initialize"in D&&this.name===C.prototype.name)}}const c={websocket:C,polling:class extends _e{constructor(t){if(super(t),"undefined"!=typeof location){const n="https:"===location.protocol;let p=location.port;p||(p=n?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||p!==t.port,this.xs=t.secure!==n}this.supportsBinary=be&&!(t&&t.forceBase64)}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new K(this.uri(),t)}doWrite(t,i){const n=this.request({method:"POST",data:t});n.on("success",i),n.on("error",p=>{this.onError("xhr post error",p)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",i=>{this.onError("xhr poll error",i)}),this.pollXhr=t}}};let a=(()=>{class s extends j.Q{constructor(i,n={}){super(),i&&"object"==typeof i&&(n=i,i=null),i?(i=r(i),n.hostname=i.host,n.secure="https"===i.protocol||"wss"===i.protocol,n.port=i.port,i.query&&(n.query=i.query)):n.host&&(n.hostname=r(n.host).host),R(this,n),this.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=n.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},n),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=$.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(i){const n=function(s){const t={};for(let i in s)s.hasOwnProperty(i)&&(t[i]=s[i]);return t}(this.opts.query);n.EIO=4,n.transport=i,this.id&&(n.sid=this.id);const p=Object.assign({},this.opts.transportOptions[i],this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new c[i](p)}open(){let i;if(this.opts.rememberUpgrade&&s.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))i="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);i=this.transports[0]}this.readyState="opening";try{i=this.createTransport(i)}catch(n){return this.transports.shift(),void this.open()}i.open(),this.setTransport(i)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",()=>{this.onClose("transport close")})}probe(i){let n=this.createTransport(i),p=!1;s.priorWebsocketSuccess=!1;const _=()=>{p||(n.send([{type:"ping",data:"probe"}]),n.once("packet",G=>{if(!p)if("pong"===G.type&&"probe"===G.data){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;s.priorWebsocketSuccess="websocket"===n.name,this.transport.pause(()=>{p||"closed"!==this.readyState&&(Ee(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const te=new Error("probe error");te.transport=n.name,this.emitReserved("upgradeError",te)}}))};function k(){p||(p=!0,Ee(),n.close(),n=null)}const q=G=>{const te=new Error("probe error: "+G);te.transport=n.name,k(),this.emitReserved("upgradeError",te)};function F(){q("transport closed")}function ee(){q("socket closed")}function W(G){n&&G.name!==n.name&&k()}const Ee=()=>{n.removeListener("open",_),n.removeListener("error",q),n.removeListener("close",F),this.off("close",ee),this.off("upgrading",W)};n.once("open",_),n.once("error",q),n.once("close",F),this.once("close",ee),this.once("upgrading",W),n.open()}onOpen(){if(this.readyState="open",s.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let i=0;const n=this.upgrades.length;for(;i<n;i++)this.probe(this.upgrades[i])}}onPacket(i){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=i.data,this.onError(n);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data)}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this.upgrades=this.filterUpgrades(i.upgrades),this.pingInterval=i.pingInterval,this.pingTimeout=i.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(i,n,p){return this.sendPacket("message",i,n,p),this}send(i,n,p){return this.sendPacket("message",i,n,p),this}sendPacket(i,n,p,_){if("function"==typeof n&&(_=n,n=void 0),"function"==typeof p&&(_=p,p=null),"closing"===this.readyState||"closed"===this.readyState)return;(p=p||{}).compress=!1!==p.compress;const k={type:i,data:n,options:p};this.emitReserved("packetCreate",k),this.writeBuffer.push(k),_&&this.once("flush",_),this.flush()}close(){const i=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),i()},p=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?p():i()}):this.upgrading?p():i()),this}onError(i){s.priorWebsocketSuccess=!1,this.emitReserved("error",i),this.onClose("transport error",i)}onClose(i,n){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",i,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(i){const n=[];let p=0;const _=i.length;for(;p<_;p++)~this.transports.indexOf(i[p])&&n.push(i[p]);return n}}return s.protocol=4,s})();const L="function"==typeof ArrayBuffer,le=Object.prototype.toString,xe="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===le.call(Blob),Oe="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===le.call(File);function we(s){return L&&(s instanceof ArrayBuffer||(s=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer)(s))||xe&&s instanceof Blob||Oe&&s instanceof File}function pe(s,t){if(!s||"object"!=typeof s)return!1;if(Array.isArray(s)){for(let i=0,n=s.length;i<n;i++)if(pe(s[i]))return!0;return!1}if(we(s))return!0;if(s.toJSON&&"function"==typeof s.toJSON&&1===arguments.length)return pe(s.toJSON(),!0);for(const i in s)if(Object.prototype.hasOwnProperty.call(s,i)&&pe(s[i]))return!0;return!1}function Ue(s){const t=[],n=s;return n.data=Ze(s.data,t),n.attachments=t.length,{packet:n,buffers:t}}function Ze(s,t){if(!s)return s;if(we(s)){const i={_placeholder:!0,num:t.length};return t.push(s),i}if(Array.isArray(s)){const i=new Array(s.length);for(let n=0;n<s.length;n++)i[n]=Ze(s[n],t);return i}if("object"==typeof s&&!(s instanceof Date)){const i={};for(const n in s)s.hasOwnProperty(n)&&(i[n]=Ze(s[n],t));return i}return s}function qe(s,t){return s.data=ke(s.data,t),s.attachments=void 0,s}function ke(s,t){if(!s)return s;if(s&&s._placeholder)return t[s.num];if(Array.isArray(s))for(let i=0;i<s.length;i++)s[i]=ke(s[i],t);else if("object"==typeof s)for(const i in s)s.hasOwnProperty(i)&&(s[i]=ke(s[i],t));return s}const Pe=5;var Z=(()=>{return(s=Z||(Z={}))[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK",Z;var s})();class Se{encode(t){return t.type!==Z.EVENT&&t.type!==Z.ACK||!pe(t)?[this.encodeAsString(t)]:(t.type=t.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let i=""+t.type;return(t.type===Z.BINARY_EVENT||t.type===Z.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(i+=t.nsp+","),null!=t.id&&(i+=t.id),null!=t.data&&(i+=JSON.stringify(t.data)),i}encodeAsBinary(t){const i=Ue(t),n=this.encodeAsString(i.packet),p=i.buffers;return p.unshift(n),p}}class Te extends j.Q{constructor(){super()}add(t){let i;if("string"==typeof t)i=this.decodeString(t),i.type===Z.BINARY_EVENT||i.type===Z.BINARY_ACK?(this.reconstructor=new Le(i),0===i.attachments&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i);else{if(!we(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i))}}decodeString(t){let i=0;const n={type:Number(t.charAt(0))};if(void 0===Z[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Z.BINARY_EVENT||n.type===Z.BINARY_ACK){const _=i+1;for(;"-"!==t.charAt(++i)&&i!=t.length;);const k=t.substring(_,i);if(k!=Number(k)||"-"!==t.charAt(i))throw new Error("Illegal attachments");n.attachments=Number(k)}if("/"===t.charAt(i+1)){const _=i+1;for(;++i&&","!==t.charAt(i)&&i!==t.length;);n.nsp=t.substring(_,i)}else n.nsp="/";const p=t.charAt(i+1);if(""!==p&&Number(p)==p){const _=i+1;for(;++i;){const k=t.charAt(i);if(null==k||Number(k)!=k){--i;break}if(i===t.length)break}n.id=Number(t.substring(_,i+1))}if(t.charAt(++i)){const _=function(s){try{return JSON.parse(s)}catch(t){return!1}}(t.substr(i));if(!Te.isPayloadValid(n.type,_))throw new Error("invalid payload");n.data=_}return n}static isPayloadValid(t,i){switch(t){case Z.CONNECT:return"object"==typeof i;case Z.DISCONNECT:return void 0===i;case Z.CONNECT_ERROR:return"string"==typeof i||"object"==typeof i;case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(i)&&i.length>0;case Z.ACK:case Z.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class Le{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=qe(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Q(s,t,i){return s.on(t,i),function(){s.off(t,i)}}const Re=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ne extends j.Q{constructor(t,i,n){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,n&&n.auth&&(this.auth=n.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Q(t,"open",this.onopen.bind(this)),Q(t,"packet",this.onpacket.bind(this)),Q(t,"error",this.onerror.bind(this)),Q(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){if(Re.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');i.unshift(t);const n={type:Z.EVENT,data:i,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof i[i.length-1]){const k=this.ids++,q=i.pop();this._registerAckCallback(k,q),n.id=k}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?this.packet(n):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(t,i){const n=this.flags.timeout;if(void 0===n)return void(this.acks[t]=i);const p=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let _=0;_<this.sendBuffer.length;_++)this.sendBuffer[_].id===t&&this.sendBuffer.splice(_,1);i.call(this,new Error("operation has timed out"))},n);this.acks[t]=(..._)=>{this.io.clearTimeoutFn(p),i.apply(this,[null,..._])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this.packet({type:Z.CONNECT,data:t})}):this.packet({type:Z.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Z.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(t);break;case Z.ACK:case Z.BINARY_ACK:this.onack(t);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}onevent(t){const i=t.data||[];null!=t.id&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const n of i)n.apply(this,t)}super.emit.apply(this,t)}ack(t){const i=this;let n=!1;return function(...p){n||(n=!0,i.packet({type:Z.ACK,id:t,data:p}))}}onack(t){const i=this.acks[t.id];"function"==typeof i&&(i.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let n=0;n<i.length;n++)if(t===i[n])return i.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var Be=l(7591);class Me extends j.Q{constructor(t,i){var n;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",this.opts=i,R(this,i),this.reconnection(!1!==i.reconnection),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=i.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new Be({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==i.timeout?2e4:i.timeout),this._readyState="closed",this.uri=t;const p=i.parser||o;this.encoder=new p.Encoder,this.decoder=new p.Decoder,this._autoConnect=!1!==i.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(i=this.backoff)||void 0===i||i.setMin(t),this)}randomizationFactor(t){var i;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(i=this.backoff)||void 0===i||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(i=this.backoff)||void 0===i||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new a(this.uri,this.opts);const i=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const p=Q(i,"open",function(){n.onopen(),t&&t()}),_=Q(i,"error",k=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",k),t?t(k):n.maybeReconnectOnOpen()});if(!1!==this._timeout){const k=this._timeout;0===k&&p();const q=this.setTimeoutFn(()=>{p(),i.close(),i.emit("error",new Error("timeout"))},k);this.opts.autoUnref&&q.unref(),this.subs.push(function(){clearTimeout(q)})}return this.subs.push(p),this.subs.push(_),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Q(t,"ping",this.onping.bind(this)),Q(t,"data",this.ondata.bind(this)),Q(t,"error",this.onerror.bind(this)),Q(t,"close",this.onclose.bind(this)),Q(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,i){let n=this.nsps[t];return n||(n=new Ne(this,t,i),this.nsps[t]=n),n}_destroy(t){const i=Object.keys(this.nsps);for(const n of i)if(this.nsps[n].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let n=0;n<i.length;n++)this.engine.write(i[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(p=>{p?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",p)):t.onreconnect()}))},i);this.opts.autoUnref&&n.unref(),this.subs.push(function(){clearTimeout(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const X={};function he(s,t){"object"==typeof s&&(t=s,s=void 0);const i=function(s,t="",i){let n=s;i=i||"undefined"!=typeof location&&location,null==s&&(s=i.protocol+"//"+i.host),"string"==typeof s&&("/"===s.charAt(0)&&(s="/"===s.charAt(1)?i.protocol+s:i.host+s),/^(https?|wss?):\/\//.test(s)||(s=void 0!==i?i.protocol+"//"+s:"https://"+s),n=r(s)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const _=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+_+":"+n.port+t,n.href=n.protocol+"://"+_+(i&&i.port===n.port?"":":"+n.port),n}(s,(t=t||{}).path||"/socket.io"),n=i.source,p=i.id;let F;return t.forceNew||t["force new connection"]||!1===t.multiplex||X[p]&&i.path in X[p].nsps?F=new Me(n,t):(X[p]||(X[p]=new Me(n,t)),F=X[p]),i.query&&!t.query&&(t.query=i.queryKey),F.socket(i.path,t)}Object.assign(he,{Manager:Me,Socket:Ne,io:he,connect:he})}}]);